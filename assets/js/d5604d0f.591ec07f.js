"use strict";(self.webpackChunkgraphdb_aws_deployment_guide=self.webpackChunkgraphdb_aws_deployment_guide||[]).push([[6255],{4137:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,m=u["".concat(s,".").concat(d)]||u[d]||h[d]||o;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6071:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(7462),r=(n(7294),n(4137));const o={sidebar_position:1},i="Monitoring and Health Checks",l={unversionedId:"health-checks/HLCH-001",id:"health-checks/HLCH-001",title:"Monitoring and Health Checks",description:"Available GraphDB documentation:",source:"@site/docs/health-checks/HLCH-001.md",sourceDirName:"health-checks",slug:"/health-checks/HLCH-001",permalink:"/graphdb-aws-deployment-guide/docs/health-checks/HLCH-001",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Health Check",permalink:"/graphdb-aws-deployment-guide/docs/category/health-check"},next:{title:"Backup and Recovery",permalink:"/graphdb-aws-deployment-guide/docs/category/backup-and-recovery"}},s={},p=[{value:"Monitoring a GraphDB Cluster",id:"monitoring-a-graphdb-cluster",level:2},{value:"Endpoints",id:"endpoints",level:3}],c={toc:p},u="wrapper";function h(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"monitoring-and-health-checks"},"Monitoring and Health Checks"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Available GraphDB documentation:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://graphdb.ontotext.com/documentation/10.3/database-health-checks.html"},"Database health checks")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://graphdb.ontotext.com/documentation/10.3/creating-a-cluster.html#monitor-cluster-status"},"Creating a cluster"))),(0,r.kt)("h2",{id:"monitoring-a-graphdb-cluster"},"Monitoring a GraphDB Cluster"),(0,r.kt)("p",null,"To ensure the health and status of your GraphDB cluster, you can utilize the provided REST endpoints to monitor\nboth the entire cluster group and individual cluster nodes.\nThis guide will walk you through the process of monitoring your GraphDB cluster."),(0,r.kt)("h3",{id:"endpoints"},"Endpoints"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Checking the Cluster Group Status:"))),(0,r.kt)("p",null,"To check the status of the entire cluster group, you can send a GET request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"/rest/cluster/group/status")," endpoint of any node in the cluster."),(0,r.kt)("p",null,"For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl http://graphdb1.example.com:7200/rest/cluster/group/status\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If the cluster group is functioning correctly, the response code will be 200,\nand you will receive a JSON response containing information about each node in the cluster group."),(0,r.kt)("li",{parentName:"ul"},"The JSON response will include details such as the node address, endpoint URL, node state (LEADER or FOLLOWER),\nsync status with other nodes, and term information.")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Checking Individual Cluster Node Status:"))),(0,r.kt)("p",null,"To monitor the status of a specific cluster node, send a GET request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"/rest/cluster/node/status")," endpoint of that node. "),(0,r.kt)("p",null,"For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl http://graphdb1.example.com:7200/rest/cluster/node/status\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If the node is operational, the response code will be 200, and you will receive a JSON response\ncontaining information about that particular node."),(0,r.kt)("li",{parentName:"ul"},"For a leader node, the response will include details such as the node address, endpoint URL, node state (LEADER),\nsync status with other nodes, and term information."),(0,r.kt)("li",{parentName:"ul"},"For a follower node, the response will include similar details, but the node state will be indicated as FOLLOWER,\nand the sync status will be empty.")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Checking Repository Health:"))),(0,r.kt)("p",null,"GraphDB provides a health check endpoint for monitoring repository health.\nYou can access this endpoint at ",(0,r.kt)("inlineCode",{parentName:"p"},"http://graphdb1.example.com:7200/repositories/<repo_name>/health"),"."),(0,r.kt)("p",null,"For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl http://graphdb1.example.com:7200/repositories/myrepo/health?\n")),(0,r.kt)("p",null,"The response code will indicate the health status of the repository."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"HTTP status 200:")," The repository is healthy."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"HTTP status 206:")," The repository needs attention, but it is not critical."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"HTTP status 500:")," The repository is inconsistent, and some checks have failed.")),(0,r.kt)("p",null,"The response JSON will provide detailed information about various health checks and their corresponding values."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"repository-state:")," Checks the state of the repository, with possible values of RUNNING, STARTING, or INACTIVE."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"read-availability:")," Checks if the repository is readable."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"storage-folder:")," Checks the availability of writable space in the storage folder."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"long-running-queries:")," Checks for queries running longer than a specified time."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"predicates-statistics:")," Checks if the predicate statistics contain correct values."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"plugins:")," Provides aggregated health checks for individual plugins.")),(0,r.kt)("p",null,"The aggregated health checks also include checks for dependent services and components as plugins and connectors.\nThe response will provide information about the status of each component and any additional details or messages."),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Running Passive Health Checks:"))),(0,r.kt)("p",null,"You can also perform passive health checks that compare the repository state to determine if it is safe to run active checks. "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Immediate Passive:")," Append ",(0,r.kt)("inlineCode",{parentName:"li"},"?passive")," to the health endpoint URL. If the repository state is RUNNING,\nan active check will be performed. Otherwise, a simple check listing the repository state will be returned."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Delayed Passive (if needed):")," Append ",(0,r.kt)("inlineCode",{parentName:"li"},"?passive=N")," to the endpoint URL, where N is the timeout in seconds.\nThe system will attempt to get the repository for up to N seconds. If successful, an active check will be performed.\nIf the timeout occurs, a simple check listing the repository state will be returned.")))}h.isMDXComponent=!0}}]);